/**
 * ðŸ”º TURBO-CATâ„¢ FORMAT PYRAMID
 * The Sacred 154 - Organized in Perfect Pyramid Structure
 *
 * APEX: .faf with ðŸ˜½ TURBO-CAT sitting on top!
 * Level 1: 1 format (.faf)
 * Level 2: 2 formats (Critical Foundation)
 * Level 3: 3 formats (Core Trinity)
 * ...ascending...
 * Level 17: 17 formats (Broad Base)
 *
 * Total: 1+2+3+...+17 = 153 + TURBO-CAT = 154!
 */

export const FORMAT_PYRAMID = {
  // ðŸ”º LEVEL 0 - THE TRUE APEX - TURBO-CAT SITS HERE! ðŸ˜½
  turbo_cat: 'ðŸ˜½ TURBO-CAT',  // The catalyst that processes all below!

  // ðŸ”º LEVEL 1 - THE FOUNDATION STONE (1 format) - The Most Sacred Format
  level_1: [
    '.faf'  // The ONE format that started it all!
  ],

  // ðŸ”º LEVEL 2 - DUAL PILLARS (2 formats) - Package Management Kings
  level_2: [
    'package.json',      // JavaScript/Node ecosystem
    'requirements.txt'   // Python ecosystem
  ],

  // ðŸ”º LEVEL 3 - THE TRINITY (3 formats) - Language Foundations
  level_3: [
    'Cargo.toml',        // Rust
    'go.mod',            // Go
    'pom.xml'            // Java/Maven
  ],

  // ðŸ”º LEVEL 4 - FOUR CORNERS (4 formats) - Modern Package Managers
  level_4: [
    'pyproject.toml',    // Python Poetry
    'Gemfile',           // Ruby
    'composer.json',     // PHP
    'pubspec.yaml'       // Dart/Flutter
  ],

  // ðŸ”º LEVEL 5 - PENTAGRAM (5 formats) - Framework Configs
  level_5: [
    'next.config.js',    // Next.js
    'svelte.config.js',  // SvelteKit
    'nuxt.config.js',    // Nuxt
    'angular.json',      // Angular
    'vue.config.js'      // Vue
  ],

  // ðŸ”º LEVEL 6 - HEXAGON (6 formats) - Build Tools
  level_6: [
    'webpack.config.js', // Webpack
    'vite.config.js',    // Vite
    'rollup.config.js',  // Rollup
    'tsconfig.json',     // TypeScript
    'babel.config.js',   // Babel
    'esbuild.config.js'  // ESBuild
  ],

  // ðŸ”º LEVEL 7 - SACRED SEVEN (7 formats) - Cloud & Deployment
  level_7: [
    'Dockerfile',        // Docker
    'docker-compose.yml',// Docker Compose
    'vercel.json',       // Vercel
    'netlify.toml',      // Netlify
    'fly.toml',          // Fly.io
    'render.yaml',       // Render
    'railway.json'       // Railway
  ],

  // ðŸ”º LEVEL 8 - OCTAGON (8 formats) - CI/CD & Testing
  level_8: [
    '.github/workflows', // GitHub Actions
    '.gitlab-ci.yml',    // GitLab CI
    'jest.config.js',    // Jest
    'vitest.config.js',  // Vitest
    'cypress.config.js', // Cypress
    'playwright.config.js', // Playwright
    '.circleci/config.yml', // CircleCI
    'jenkins.yml'        // Jenkins
  ],

  // ðŸ”º LEVEL 9 - ENNEAD (9 formats) - Database & ORM
  level_9: [
    'prisma/schema.prisma', // Prisma
    'drizzle.config.ts', // Drizzle
    'knexfile.js',       // Knex
    'ormconfig.json',    // TypeORM
    'sequelize.config.js', // Sequelize
    'mongoose.config.js', // Mongoose
    'supabase.config.js', // Supabase
    'firebase.json',     // Firebase
    'planetscale.yml'    // PlanetScale
  ],

  // ðŸ”º LEVEL 10 - DECIMAL (10 formats) - Modern Frameworks Extended
  level_10: [
    'astro.config.mjs',  // Astro
    'remix.config.js',   // Remix
    'gatsby-config.js',  // Gatsby
    'qwik.config.js',    // Qwik
    'solid.config.js',   // SolidJS
    'fresh.config.ts',   // Fresh (Deno)
    'elder.config.js',   // Elder.js
    'sapper.config.js',  // Sapper (legacy)
    'blitz.config.js',   // Blitz.js
    'redwood.toml'       // RedwoodJS
  ],

  // ðŸ”º LEVEL 11 - ELEVEN (11 formats) - Mobile & Desktop
  level_11: [
    'app.json',          // React Native
    'metro.config.js',   // React Native Metro
    'capacitor.config.ts', // Capacitor
    'ionic.config.json', // Ionic
    'electron.config.js', // Electron
    'tauri.conf.json',   // Tauri
    'flutter.yaml',      // Flutter config
    'native-base.config.js', // NativeBase
    'expo.config.js',    // Expo
    'react-native.config.js', // RN Config
    'cordova.xml'        // Cordova
  ],

  // ðŸ”º LEVEL 12 - DOZEN (12 formats) - API & Backend
  level_12: [
    'openapi.json',      // OpenAPI/Swagger
    'graphql.config.js', // GraphQL
    'apollo.config.js',  // Apollo
    'fastapi.config.py', // FastAPI
    'express.config.js', // Express
    'nest-cli.json',     // NestJS
    'strapi.config.js',  // Strapi
    'keystone.config.js', // KeystoneJS
    'directus.config.js', // Directus
    'hasura.yaml',       // Hasura
    'serverless.yml',    // Serverless Framework
    'api.config.json'    // Generic API config
  ],

  // ðŸ”º LEVEL 13 - THIRTEEN (13 formats) - Styling & UI
  level_13: [
    'tailwind.config.js', // Tailwind CSS
    'postcss.config.js', // PostCSS
    'sass.config.js',    // Sass/SCSS
    'styled.config.js',  // Styled Components
    'stitches.config.ts', // Stitches
    'emotion.config.js', // Emotion
    'unocss.config.ts',  // UnoCSS
    'windicss.config.js', // WindiCSS
    'chakra.config.js',  // Chakra UI
    'mantine.config.js', // Mantine
    'mui.config.js',     // Material UI
    'antd.config.js',    // Ant Design
    'bootstrap.config.js' // Bootstrap
  ],

  // ðŸ”º LEVEL 14 - FOURTEEN (14 formats) - Monorepo & Tooling
  level_14: [
    'lerna.json',        // Lerna
    'nx.json',           // Nx
    'rush.json',         // Rush
    'pnpm-workspace.yaml', // pnpm workspaces
    'yarn.lock',         // Yarn
    'package-lock.json', // npm
    'pnpm-lock.yaml',    // pnpm
    'bun.lockb',         // Bun
    'turbo.json',        // Turborepo
    'moon.yml',          // Moonrepo
    '.yarnrc.yml',       // Yarn config
    '.npmrc',            // npm config
    'verdaccio.yml',     // Private registry
    'changesets.json'    // Changesets
  ],

  // ðŸ”º LEVEL 15 - FIFTEEN (15 formats) - Linting & Quality
  level_15: [
    '.eslintrc.js',      // ESLint
    '.prettierrc',       // Prettier
    'biome.json',        // Biome
    '.editorconfig',     // EditorConfig
    'stylelint.config.js', // Stylelint
    'commitlint.config.js', // Commitlint
    '.huskyrc',          // Husky
    'lint-staged.config.js', // Lint-staged
    'rome.json',         // Rome (legacy)
    'xo.config.js',      // XO
    'standard.json',     // StandardJS
    'tslint.json',       // TSLint (legacy)
    '.jshintrc',         // JSHint (legacy)
    'rubocop.yml',       // RuboCop (Ruby)
    'ruff.toml'          // Ruff (Python)
  ],

  // ðŸ”º LEVEL 16 - SIXTEEN (16 formats) - File Extensions
  level_16: [
    '*.ts',              // TypeScript
    '*.tsx',             // TypeScript React
    '*.js',              // JavaScript
    '*.jsx',             // JavaScript React
    '*.py',              // Python
    '*.rs',              // Rust
    '*.go',              // Go
    '*.java',            // Java
    '*.kt',              // Kotlin
    '*.swift',           // Swift
    '*.rb',              // Ruby
    '*.php',             // PHP
    '*.cs',              // C#
    '*.cpp',             // C++
    '*.vue',             // Vue SFC
    '*.svelte'           // Svelte SFC
  ],

  // ðŸ”º LEVEL 17 - THE BASE (17 formats) - Infrastructure & Misc
  level_17: [
    'terraform.tf',      // Terraform
    'ansible.yml',       // Ansible
    'kubernetes.yaml',   // Kubernetes
    'helm.yaml',         // Helm
    'pulumi.yaml',       // Pulumi
    'cloudformation.yml', // AWS CloudFormation
    '.env',              // Environment vars
    '.env.local',        // Local env
    'Makefile',          // Make
    'Rakefile',          // Rake (Ruby)
    'Procfile',          // Heroku/Process
    'app.yaml',          // Google App Engine
    'now.json',          // Vercel (legacy)
    'staticwebapp.config.json', // Azure Static Web Apps
    'amplify.yml',       // AWS Amplify
    '_redirects',        // Netlify redirects
    'robots.txt'         // SEO/Crawlers
  ]
};

// Calculate total (should be 154)
export function validatePyramid(): boolean {
  let total = 1; // Start with 1 for TURBO-CAT at the apex!

  for (let i = 1; i <= 17; i++) {
    const level = (FORMAT_PYRAMID as any)[`level_${i}`];
    if (level.length !== i) {
      console.error(`Level ${i} has ${level.length} formats, expected ${i}`);
      return false;
    }
    total += level.length;
  }

  if (total !== 154) {
    console.error(`Total is ${total}, expected 154`);
    return false;
  }

  console.log('ðŸ”º PYRAMID VALIDATED: 153 formats + ðŸ˜½ TURBO-CAT = 154!');
  console.log('ðŸ˜½ TURBO-CAT sits on top of .faf at the pyramid apex!');
  return true;
}

// Export flat list for easy lookup
export function getAllFormats(): string[] {
  const formats: string[] = [];
  for (let i = 1; i <= 17; i++) {
    formats.push(...(FORMAT_PYRAMID as any)[`level_${i}`]);
  }
  return formats;
}

// Get format level (importance)
export function getFormatLevel(format: string): number {
  for (let i = 1; i <= 17; i++) {
    if ((FORMAT_PYRAMID as any)[`level_${i}`].includes(format)) {
      return i;
    }
  }
  return -1; // Not in pyramid
}

// ASCII pyramid visualization
export function visualizePyramid(): string {
  let pyramid = 'ðŸ”º THE FORMAT PYRAMID (154 Stones)\n\n';

  // TURBO-CAT at the apex!
  pyramid += '                ðŸ˜½\n';
  pyramid += '             TURBO-CAT\n';
  pyramid += '             sits here!\n';
  pyramid += '                |\n';

  for (let i = 1; i <= 17; i++) {
    const spaces = ' '.repeat(17 - i);
    const stones = 'â–ª'.repeat(i * 2 - 1);
    if (i === 1) {
      pyramid += `${spaces}â–ª (.faf)\n`;
    } else {
      pyramid += `${spaces}${stones} (${i})\n`;
    }
  }

  pyramid += 'â•'.repeat(35) + '\n';
  pyramid += '153 formats + ðŸ˜½ TURBO-CAT = 154 Perfect Total!';

  return pyramid;
}